# Verify Service Provider: API reference

This is the API documentation for Verify Service Provider. With the API you can:
* generate a SAML authentication request (AuthnRequest) with JSON
* translate a SAML response into JSON

To access Verify Service Provider, you must [download your own version](https://github.com/alphagov/verify-service-provider/releases).

The Verify team provides a client library for Node.js with the passport.js framework. If you would like to request a different client library, contact [idasupport+onboarding@digital.cabinet-office.gov.uk](mailto:idasupport+onboarding@digital.cabinet-office.gov.uk).

See also:
* [Installing and configuring Verify Service Provider](/README.md)
* [Tutorial: How to securely exchange information using Verify Service Provider](/docs/tutorial-using-verify-service-provider.md)

## Generate a SAML authentication request

Generate a SAML authentication request, known as an AuthnRequest to send to Verify Hub. You must specify the level of assurance required.

See the [Verify Service Provider tutorial](ADD LINK) for more information.

Path: `POST /generate-request`

<details>
<summary>
Example call
</summary>

```
> POST /generate-request HTTP/1.1
> Content-Type: application/json
>
> { "levelOfAssurance": "LEVEL_2" }
```

</details>


HTTP response codes:

| Code | Description |
| --- | --- |
| 200 | Contains an object with a valid SAML Authentication request that can be consumed by the Verify service.|
| 400 | Bad request. No response available. |
| 422 | An error due to a JSON request in an invalid format (e.g. missing mandatory parameters). |
| 500 | An error due to an internal server error. |

## Translate SAML response

Consume a SAML response from Verify Hub and translate into JSON.

See the [Verify Service Provider tutorial](docs/tutorial-using-verify-service-provider.md) for more information on how to handle the response.

Path: `POST /translate-response`

<details>
<summary>
Example call
</summary>

```
> POST /generate-request HTTP/1.1
> Content-Type: application/json
>
> {
>  "samlResponse": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHNhbWwycDpSZXNwb25zZSBEZXN0aW5hdGlvbj0iaHR0cDovL3Rlc3QtcnAvdGVzdC1ycC9sb2dpbiIgSUQ9Il9kN2NjYWZjNi1lZTdmLTQyNDEtOGVjMi02YTQ0MzI2MDM0ZTciIEluUmVzcG9uc2VUbz0iXzJlOWI3NDU1LWJhMjEtNDNiNy1hYzMyLTNkZmU1MmQ1ZjVkYiIgSXNzdWVJbnN0YW50PSIyMDE4LTA3LTEwVDE2OjI2OjIyLjk2M1oiIFZlcnNpb249IjIuMCIgeG1sbnM6c2FtbDJwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhzaTp0eXBlPSJzYW1sMnA6UmVzcG9uc2VUeXBlIj48c2FtbDI6SXNzdWVyIEZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOm5hbWVpZC1mb3JtYXQ6ZW50aXR5IiB4bWxuczpzYW1sMj0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiI+aHR0cDovL21ldGFkYXRhL2Rldi1jb25uZWN0b3IueG1sPC9zYW1sMjpJc3N1ZXI+PGRzOlNpZ25hdHVyZSB4bWxuczpkcz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+CjxkczpTaWduZWRJbmZvPgo8ZHM6Q2Fub25pY2FsaXphdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIvPgo8ZHM6U2lnbmF0dXJlTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3JzYS1zaGExIi8+CjxkczpSZWZlcmVuY2UgVVJJPSIjX2Q3Y2NhZmM2LWVlN2YtNDI0MS04ZWMyLTZhNDQzMjYwMzRlNyI+CjxkczpUcmFuc2Zvcm1zPgo8ZHM6VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz4KPGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIvPgo8L2RzOlRyYW5zZm9ybXM+CjxkczpEaWdlc3RNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGVuYyNzaGEyNTYiLz4KPGRzOkRpZ2VzdFZhbHVlPjhaOXVSQ3NHMUREZExYN0hJMlZLVjVLcXVDMTFSOVQ3azd3VytXYUVORjA9PC9kczpEaWdlc3RWYWx1ZT4KPC9kczpSZWZlcmVuY2U+CjwvZHM6U2lnbmVkSW5mbz4KPGRzOlNpZ25hdHVyZVZhbHVlPgplekc4aGo1cWtsNWg4dHBOSFpEUGRHQkcyV2d3NGEwM3gvREdrU0x1amZXTzJQckFONlVBbXJ3UFcrVjJIT0ZHVGVOVmdRQ1ZVNEZ6CjI4KzNVZmJuM1hCdHp3UFBrRk1qZmx3SW81QlVDcDFlK3lEZUwvem5zN3d4S0hKRGN3Q3owbWRLQS9UZUZ0RFdzNTdzN1hYbVowZEQKaG5Sa2RHR2VLenRuOU41Ni9sSFBIUXZjNGxkb2t5UFhhNG9PVjJ2a0liekxIb3VteUVRL2FlNDMvNWV6Zm15c0dxN2pjd3hwOXVhWQp1dFN6TjV5L1JkVk1nMkxzcDJoNVlPVlBZYnlvM01INzhzY0FqMEVCeGN6WFdwVm1ONWlwVld2azhTeVVrUTMrNUhWcnJxTllvT3ZICmdTeTNhd1ZMT3FBWXp4b3hPb0p3aWZTSS9RbytRZWEzSUN0TkV3PT0KPC9kczpTaWduYXR1cmVWYWx1ZT4KPC9kczpTaWduYXR1cmU+PHNhbWwycDpTdGF0dXMgeHNpOnR5cGU9InNhbWwycDpTdGF0dXNUeXBlIj48c2FtbDJwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIgeHNpOnR5cGU9InNhbWwycDpTdGF0dXNDb2RlVHlwZSIvPjwvc2FtbDJwOlN0YXR1cz48c2FtbDI6RW5jcnlwdGVkQXNzZXJ0aW9uIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj48eGVuYzpFbmNyeXB0ZWREYXRhIElkPSJfMzViMmM5MmNkODQ1MTRiNmVkNmM5Y2JjY2NkZjVmY2QiIFR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI0VsZW1lbnQiIHhtbG5zOnhlbmM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jIyI+PHhlbmM6RW5jcnlwdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI2FlczEyOC1jYmMiIHhtbG5zOnhlbmM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jIyIvPjxkczpLZXlJbmZvIHhtbG5zOmRzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj48ZHM6UmV0cmlldmFsTWV0aG9kIFR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI0VuY3J5cHRlZEtleSIgVVJJPSIjXzBhZGY1ZTM2ZjgwNDFhZjcwZWYxZjY5ZTM0ODRlZGM2Ii8+PC9kczpLZXlJbmZvPjx4ZW5jOkNpcGhlckRhdGEgeG1sbnM6eGVuYz0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjIj48eGVuYzpDaXBoZXJWYWx1ZT5kU2xnQmZxOWtidGd5bUVvMHBQQ0dzRWVvNWErdTJjT1piMUt4WDNrTUlBMmp6aEx2cTlxRWkzQ1JXRHBOTysrNmhuWTk0M0lUZUJYCnpGMDcwUDUybTc2aE1IK3JWbEkyRzNlMk1PNFpOM3pZeEtlaFVRNFdSNG0rNHIzNXZHZEQ1OXlZRnpYcHFVMis1TjE1d0Zaa2JWQlMKTG1uN3R6MjBkUDZtNEVnTmtvWlFJQm11Y2xIUHhUSS94OFI5VDFsRkdPV1dkZXF6cGswb1lhUTlJWCswZmhHN3VoUUFJdlUrZ3h2QwpnMWhsaDFvMnFad2RlbzZtVCs1b2lWaC85aDI2SWpkVjFkSnp4NkplSlRiS0VTUk0zd21oOU0wamtUMHVIU0xGTzJhOVJuOFdHWnZaCldGSlVOKzhvVGlLWFl4NXlsZ2x5ZzVKcVN0akZoWVl3VEIvYlV4U0JzVXlXWk5FU00rT3NuRDNxNUQ0UWpHQ0NNdGJZMTBOY3NCUDEKS29pbmtWK2l4dFpLTEtTZjRjbHhuOFZ2THRDQUtWU2ptQzZrTkIwMkx6aXI1REVaZGRjU0RrbUlwQmxsNUNiS055TDdES0FNM2EzbQo0V3h0bnJTdEFKMXVZSTVlTlFCMG1ZNmtXV1VoQ1ErV1plVWFGWlNSd3hQSDQ5S1Q2QWtFT0pKWGQ1SG01cUNPeGV6NDQzNVNCRFVQCmMvMGh6NXpQSWg4VzlkR3cyOXRJdk92VldQNDllWmlxeEdzenJPRW1vZDZJeEpraXZFTGRieUhOckRUQXM4SzBjbWE1Z2dKam9wNFAKRkFFWFppVUFwSkoyYUIvUUFJWG5WZzNVWjJwTldzbENubFJoZnZWR3B1My9WckNJTWI2b3o5WmR4NjM0blpXL0RFVjZYNjVwQm8yQgpYNVE1ZnNUeVhlYnBoUjc4dU9kMEdocXVycHlDQVpKUEcwK3VIT1diYUIwS1hmMzNwUXY4YVdtaUNkQzNGSmpKSmJFN09hcmNLWlBsCjZJU0JFdWpTTG9oemVjTmFyM3lxb1dzYndzWFY2anZkNXU1eTJqUDlRdHcwWmt3UWFlbmdqZTRzVXlocm5RTk5sakRnbWo2WE9GMW0KN3UxWjlaUWo1K09jSnhaWjN0OXV0WlpmbTk2RlEzeGpydW9YMkpCSDlRaEJxL3lUdVRnMUFSV2F3VHowUW9DdFpyQnl2VDM3RWVoSApEeEdxODVqYjc3Nmtha000M0l0RVprSHgyTDA3WDBiamVIaXdaT3hFelpHWTlLRnlrQ0hFRDZQQXQ1T25oZXgyZWprTnk4Y282SlRwCjBwTmUzRjZiVWdYS3FERVd6U0xCMEQ3Z3Q1Q3g5MXFUcUNROGJ2b2hQdmNOc2xtMVFBeWpjb0cxU1lsTitVQUk3akhuUkh6T1ZqU0YKSnNScFcwWktkS1RBaU5wRFRlcU1JK1JtY2F5MFZ4d09SRzJtWHkyQTM0T1BWYlJYbmQ1KzV5bldIQ3ZLdDczMTBBZTZXcG0vMUh1eApxbHVScnZjaU5FU0pWLzZIYjJ5Q2NFc25JcG4wREpFUUdTY2I1ZDJ3RVVHK2lyanNUWHhETDZXWkdFRGFSTUJwVUg3OVZaY28vUHdRCjZUTWdGVEVQVjRQUFdvSWNCRHJXQS9Ccys1WGJydzhrZHZVNExwbDZUQjN5WWl0T0hHRGNibWhYcnhDajFyMmh2Z0JrM09HUDYvMEsKNmJxWnNpZlM4V0s1UTlqREVqM1BPNk1xWlFTMlpIQVhPaGFCNVJxVy9CREN2Q3g5Wjc5NGp0TVVCS1VBZmtzdlN6S2hXYzhSTE13dwprb2dncnhmeldQNVhMUWcvNmE0dlBveVU4UUZvQ2s4R2RZZDFXTFRDREowa0lqZ1NURTdidWRjZWpGOHpydDFsZXVJOElwTkY5MTBRClV6aVRNWFpRTDRmbU5CRWpUQ0QvVTlSSlpTdEhUVDBTc3Ayb2gybUFsNGJjeE1BdGEzNzRiSGJkWmJqVTFONEZEZ1VkV0I1NDRuZ1UKc2VIU2w1bVFwRHd2am03Nkl5R2VGVmtYcThpV3NHOG9MSWFvM1p1blZJRWVHYXJpeHVMaThWUklSMWJ4SlY2SXVkbWFkWnl0UlhHVQpnR0N4ckZWSU1SbFh3blNHT3RwYUdOOGhNSStaSWtqNk9IMEtXZDkzb2dFL3RsWDlhV3REV1U4a0hJMkR4dzhwZ0xxMnRoTTcxNGE1Clh0QVRpd0tqb3c1a1JxdTVBVURIQXJ5NGVmRzBHQjBLTmo1M0QwVkthNXJoRmt1T2ZveVplV3I0ZGtFRVpROElrRDh6YURBeWYxOHYKZnFoMDIraVhyTXBIdC81eTlQc2VnVnZzQWRGYmZNVFcvVjQ3UFpiOE9XQ0ZSR1gySVhEREZPSXZXWmFrNVBVNWk1S3VyZ29kUzBSZQorM3ZaczJpZE1WbkV1MXN6Rll2Y0E1NVNVNjZqcGZKQVMzOGpka0ZSdC9WL3dHbWFNZEtkdnRGK2lTV3ovdmlpazgxM25YSFRFZDJUCkJKY0gra2dOTG5xbEw1MEQwZndJemxVVzJZY3VLWlpuZ1ljVTZtQVAyUlFHZzd5VTRjd0hSbjFsR1hVU2tvSUY5WG1JQVV1UHF1L0sKb1pUMVFzOVg0MUJaYXZFVmZocHpaVTFjbEdKaGU5NVBUWHR1aE9WTUlYSVgzTXk5UitGNElWM2VWL2F4SzdPRk0zKzI5MXFQSEhUQgplcmpSeUQyQnE1M01PYlFlcFRZNUFOS2lkeUNqQ0dBQjlHb3JUaTdJa2VlNW05SEQvTVpQZUdMSWsxSEx6N0M3Znc0U1hxZGVBTVVvCkovSEpIbjR5NVVkQWZFbWhRaDVNZjl1a3QyeWd1cUpablFwMW01NDhZWURnaEs3YmpJS0FZR2pWVDFUZ2FxR3VGaUtJTmRGZWt3cjkKYU1MZVNKY29xRWV5RnBBayt4ZEFBWmFyYjZGVGRSRVFTOHk1aXJOeThHcml3cWNXa1cwbEczR0htNWpxNlMwcjZ0c1NMKzQzYlZMZApSQVl5RFdxcXRENE52MmNKaGFNQk5yTlI4YmltZVZ5Q2FTT1B0NUhvdzBiTE1vZGczRmtkeGE1OHhnUXJHbFJ6N1ZVN2wyWW1oeXVhCktUZzg3YnUyV3JSV1drLzI2R0JHbllaa2YwVU5pMUJyc0JaS2c5dkNBN3hCanVPUHA5NThVamM4Mm02NU82WkZ2R1Vua3NabHdPcWIKUm9zZ3lrUGxqeHJSdlJCV2JocGVzNlE5aHBleVJsaVN4Wk50cjRKenBjVnpsTnVic1A5a2JmamFwU3V5TTFJVmpkc1VVSEk0V2xjaApKazBnazVyWjRKNzZBZ0NkOXBQVDB2RzVkUS9oQkxMWHZady9CRGRVNzZFdzJsYmlLUURuWjlEZWg2Z2ZkN0VJZVpPbHBKakllTnVOCndwbUcvT1BvOXJubGNxZk9iT1BrV1VwLzZrTHZlQXJ4SUVuWFF2MzFWMk83YktNRGE2dWM0VkJNMEp3akxCQUpMZlJVbjJkdW9ONjUKWExrb1dGVnN1L3hOVkVXUjN0TW82U3pDNDVZT1FVOG1XRFdvSTZoTnJmS3lFRUM3S0huRDJCZ0ZlamVEQUNZUjZDc1hqOU1Kc1RSOApLNms3T2hLRVBlWTZlNmFwMTh0TW9Bc0NTMUZEVzY5aCtrR0IyNHhTTkZWNU1sVlQzWjNDVUdwTmF4QUtRRjdyTlhGQzZ6bnpSRnZBClpjWXNqRTBRL0c4NFUvbDVWZU5TRlZIYXlhOXZmZFM2eTlZZURseWgrRnhUY1pxTTBNWGQyOFVWUHVWUTIrbHNrdDVRMzJhYWFneXQKNHQzUzZUVWd6eS9VeldIcHNYaEdacHdYOGFtLzN5MGNJdzFpT0tXZ2RCTWZyUUExeW1HVko5VkJvQ3k2S0ovbWxyNmkyR3ZydVN5Qwo3RHkxRzlmTzVRUHoxd09wQ3VRWjNqUWVrNU9idzFRTytXNDd2dmkyeHdlOE1CWHY2cUpXRURjWU1LNkRJalN6OW9iYXdOYWJDN0pECmRUdXlqVjZrSXRGdDY1U0RPRXBDcTArQWV4YkpYdXQxa0lsVXJ3UnNwdXZlR2NjSzdSY0prZS9reUFlb2Nzb3RTSjUxdXBnVHFESlIKL1NveDRKdE5sbVRZcFpwVGQ0UGR0TnFBb0xKTzNiTVZjY3VOYlF0QWxWaDBjVVlkbTVvVGM3MXhoZHJFZVl6NUFzTlZKVnJER3dSeApydXJLYWZoZzFkY3hweEUxK2pBMzMwTW1PdjNuSFBxR2wvSHQ2NDBCUzdKUVdHNzJnKzBVSHYzdFUxUVNKaHgzYmUzSkZFeFdxVlpCCktacmpVTFRYeG40cC9PbDE3YVpKdEJTWWplVFlTTjhZSWxQU2NjQW5TSW1sVEJGSk5xMjg5ZXFmc2dWMmJjaHYxS0lqRFNDZ1EvQmEKZElSeVJvam9lYWl1RGFwS3oyeW5ESlRBN0dYSFdaSVlLUVpkcU5ZSElEQWdFMVBtMkFRbXlGbERIdkRxdVhmSnBTbnFwQmIyeVFYNwprU1UzZHdzT2kxNmhOODVTck1ZclBhRlBFSkJMeWZFOE5qUXh5WUdTd1A1Q0t3cFpjaVNabEViTE9tU0s3aGlmR0sxSHI0RUtRYjBWCjlrcitVTm5lb0pHUi9xakJZZ254R2Q0MTE2M1hpbW15OEJ2WW1rVTB6NmRBbFZ3aHFtUlJsTkVYQTBQUVVYTWdIUGwrTXNGd0tMOTAKMXlqdHZMUmpOb0FTN2Iwei9Eb0Fmb2RPNGRIVnNqTEwwR3ZQaTFidjM4a3JvVlZwMmQzcU40OUtKQllJRWxTZ1lDSUVqd05nRTBMSwpBajk2dmZQdzJZSnU2Q0E0eU1URkdmRTgyNkJFR2ZvRHZ2N0QvUUx3UWcrVmZERndJbEpBNW5QalhwbWxXeG9YSWlHYjFPOTk5NmJKCjZ6azdCb3p3K0QreFl1SEo1b0VUODBQZ3piemVhek5SQ09pS3ZqUStsZHlZbXhENDZSSWgyNVBXVHA3YjVGbEM2TWhETHRDd3U1VDQKdFhXTWFTTys5OUp0eVRXc0tOM3dnSHBBY1hlZUtqRmZKRlkyeXplRHF5Z0lsSmIzTGlmM3lNNUVXV0t4eXpVNjgwU3hTZVV5QkozYgp0ZGlJU2tJMktlcFpYaW8xN2dBMW5CbzNhMUZtdTdWa1JTZ1FyVktvMjdOcjM4dW9nQm02b2xJSXJDbnNESDZqSTdOdm1iUmY0dXpVClNtTTd4UVdFUG5QSzNGWklwcitrSDlmK0t1YU1EV2JiUXJZWlRySmE3bjltQWl3ZDhYcngwR2xEaXV3aGdZV0JxM1FSRGVPUWRWbzEKRGxGTVVHNUJVSk9DZzRoY3FtWWhRazRkSmRiSldBZXVTV3NaWm84dWQzd0drOVJEVk8xSG8rNEFwK1U1NU1adXFKVjVoRnFBeElkRwpGSWNIcEhyOVlScytsSlhyTjB2WW9LMHdMYkhoQ2NSL2RDTndGcElSM3BqWS8vTkVKT205NUZxRFpab0dlK0tmNEF3Y1Yvb0tEYWFnCmhkWmVTOXp2em0wMVJmYWpuTmsyODFHUkFCalU5dE1lZUpWOWFwOWt5MUk3eE83eS9lWTdJd29Wa3ZsM0dmVmdCWWZXazdzSUU5c0MKWFJTQkZFMU43Y3FHb2IwQXMvVmF4MVRXb2RxNDYrUjhWZHhzUEFRNDI2YVVsVTJwdit6Q3cybGtvNm9GbDZXUklFNStweE9xODhObwpSbnpJc0NEOTg2Q1pxU1ZqV2pNbGJzTGl4bE0xaDlYMUZQVStXMHJnVllWQXY4WGtVZ1gzOGVBQ3QvWU9JOEhhd21aOUtrNzRCeHFKCmtNZk8zYU9DMVZHN2w0L0FZNW5FeStwT3dxNlFrRzFreUZHVlhLNGFpbkVuTk5FTTZKaHZYdjBQRG11MHA2Sis4YkNjakNRSW03SjIKeHVFUitaM1k5cll5dDFjNXNobHlCcnN1cFRBekZqUjlXNXdNdTIvUk02Z1RMSkluVnhFQWN1eG5seDNBSVJlZGtOUk9weVJTWmVDRgpDSVQwSUc1ZzlVN1NqUEVMRXFXOHpVRjZIQjgyazVoa0FtUi9mbWdTQlhiamJ4V0FieUhCdGFwdkxOZ042N0toVVk2eC9KK1BuY245CklhakhFUURNUGRRSGNwdStUNHZZVFJFcmowTkZGdVUyckowUjc2L1AzU2U4SDBLNmRWLzUrNGFiZTF0ZHdpMjRtZWJXZXNjR0NreW0KUjB0djJSQS8xQ2dadUk1SWZRM0hJaGp1MDF6d2RDRTZFL2JtakhTSlBvbGRlN2lxRUdNMy9WTkZYbk5WUEdxd0dvR0tWdkJYc2NZVAprb0xrcEMzbjh1aGJ3U0Vra0ZMaTN3TlhCNkRmbVlkTGpNeU1NdE1mUVNnV1dLTG1Ma21vQ3hYeGdrYnorYUJRbVViL1V0eWphZTJnCnVQMVZ2UWVpUTJ4cnhIVDFQVWZJYXFJOXQrOUYyejVOclJ5RnFTYmxQYW42TmZqODNVK29EOVpwTUxLR0VIRitwNTZpSEtmdVZ5aTAKTVArN2lyTC9wV3doekc1TFFLQll0NVNtSndSQ1hxR0I1b2xtZ0ZWTno5NU96d2pEOXY4bHhucllxeWJNYmdPRWZBaUtKOXIwck5NcAplTkYvUGYrY0FTWWV4YWRmWVBEMkVFTGNseTB5a1hRZEhSMDFiRUVraG1sK1ltWnJUdUV5UVBTTWNwdytSM3g2RHpoS3RhZ2dIU3JqCk8yemt4OVZsWGE3VnBSYlRYK0hyUDhDbUxwelF5dFBYNFRGMWpzcHNQR0dQRlZRbUhWS0NUU1V6b25CZFlBcnB5WStyckxTM2FGd0kKZFlRcGpHeGo1eHZQaEQ0MnNNcWZDK3JOMFlxZUpEc0pZTEpwZkJidUhoZWoyVWtsTnV6dEVmYUJJb1hYZnl5VHkyL0xhazBDNEFyVQpSZXZWVFhWRmNxYWdsNDRSUFQzTDFObGFoKzVwTFBnV2s0aHZQYmc2VkVjeExwOFVBblhMQlpqRDZ3SzFqR0dWczlKZ2V5WGJBYjJsClc3YUUwRmN0UU9xa21LcTBidjZHWlhrOUJZOHpoaWZONURBclVFb1NiUDZpTmtjYllLbXd1dFlVUlFSQUhwT0R6Slk0T2tURFo5bWkKL2YwcjRMcmZjOXVYWkRoYTdTdEVLMjl6M2p5Wk0xbVZGV1BkMkJ1U0wyQnVvLzFkdGkvd0NPeTV4Mzc1anh5WFl4VWRodE8zZ1NhcApZdXBxQUlOOUVtSDRrcmY1TUYyL3R6R0V2R3JaWEYwa29reVVuTnFlWlRXYUdkZnM4Y2tGd1VzSkRGN1lwRzMxb0MvcTVHM3B6akVnCk1PdjRVK2RleUw5anVJaHBEWk8vcnlNdDhPMGRxbUxWYWRxN2RCQnBRb0tvaEtacEpiNEhSeWYxZ2dJNE5iK0QyNUxsWXkrOGszVXQKby9OYVRKYmtoWVVwdjEycnZuVXY3aDBVS1k3SWhPSDVaUXNnbzBCTmI4d2JyMVhjZDRpRklQdVFQRW5tZ3BlU3NCcVdlZUpzVjkxeQpQYkxIQ3dETDN6bVFkbnA2K3BEbjNWSUVwYmJKdFVJT3M0aTRORFA3dmcwU3AralMyR2ZxOVlkNWpWTVBMVmxTYzdINU5rYTJNNlYwCk02dDJlN2lQWThySW11UnA4RW9oRURWTDJFaUl3a2pWVUlNWnUvY2tVVHZrY0ZKeVF5M251S28rSWo5M1RHdXpaeFk3WG1oZENwaTIKTUdqTmdDUnBMVEhacEZLamwycDdTUi80aXR1Qkp5b1lyanFqUVZZK2VzMVdBTGlTQkdQUzNwUmdEUUwwR0JrNWVHM21ISE9lZ3NGbgpjL0pvUEVya0pqNXMrMUVVWkZzWU1ZR0dhZFFpNFBqa0VSelRsajYrUEFwUWp5Tk9ZOGpSRSs0b1NOUXdvNWdNUjFERkkwMlBVbXNTCnNjWmh1c0hZSlE0L3lxR01PbHJ0Rmc4cW9peGtySGxjeE51M2lXeXF6VmtkVEVMTlVoUUdsMDVaZjRDczh2VzBPcjhpUWNXWXVNelMKZ1JrOFZ3SEx1N1NMZUJUNHBNaTVzUVdXdVp2bXR3YVRpZEVmRTEwQjJFSlQ3ODEwMWd0Q09zUDlnZ3YxbjcydTd4a3F5NTFNekg3MApObDB2bDJqY3dkV3BxUi9rQjUvMGg0Y1dXQ1c0WThqd0VyM3F3L1BmeHJ5RDJMU0JPMTZucGhhZ1lKWGNIU0F4cFhmeW1qdlY1TGZiCjJITWRxRWF3ak1lNlB5MGljbnlqL250RnVJclo0YnRzeDU1T2NMbUxvNi9aZnZpdWNlekc3NExBQytzVFdjNkllUGhrZ1YxSkowdW4KTkt6QW81VHZwV0NpSlhRS1dVUXRrNEsvU0dVZzBOdXRIMkdhSVRYZEZhdDlMc3dnSlM5RjhTWTQvODlPV1Fva21MR0ZTZ3RvQk5lWgpINjlhRmpoZWQ4WC8reVdMSHpibk9nWjRvVHUxVXhTRzZwQW9tcGJwU1dPclBYWUcvOWNuNEhaTUhSd0ZBVEExd3Iyc2lQbXhmanZDCm9mRitaTzlXMnVmekxpZklMWFNlaTZ2cGp2UXYwSnlLSURIZHlEeHhUWE9xdlRURldETHhPUzI0TGNXTEVlQmExMndHZnRSZGJsd2kKMU1sMnY4RGNrT3NTazJaRFErcGZlYW1yWFdKNG9Nc0ZvSFZyK0ZXb2ZwVEVSdVczclpVSzNwMHhtdjNXK1JvMU9uNVNYbWc3dlFpTQpvM1hJUTV0Q2Q0aUtWUW94TzFlaTFHcldpRU5NRnZQUUgrRStQSUErSUliMThRZHV5d3pRcVhmYWx1NURWbEFKMzBwUWx2QUR3RUM0Cnp2VkE0SzJzZ2xsaUhqMTh6NGFVRDJjaFR5TUtxVjFRaVBha3BRcldkNk1LQkdoL3AyK1NYUVd1NktyNUtzNzJoUXN3Q3Q2K2l1TlEKK0F3eVNSSXNvVzRXQVMzSFNyQVk2a0E5UUwvcG9MMUpLSkNVOGVWdDd4U2xQZGpxMmE5Q2l6T1p1NjNuRWdkajVTU0JrWitKVjZxWAp4KzlRYis2YjBMY0N3Q1lTY1d0Rm0ydU1BMGZid1NPcTA2eEcrT0dzVWNrdDVQK21rNjdvMVRtQjhVeEtsODVMbk90Y1E1cUM0TU94CjEwZ0dyanl6LzVsRUp1N1FDd3hzOVNWbXVkSGJLTkRZS1YvYVJXc2Z5WFpnUFd0OXJQU2lZVTR4R1I2Q0ZkSGNMWmVWcVdjOG5DamoKMnp3a2MzYmtLSUZ4elhaa1k2KzZZdmpjaXM2dTJWdEx4V1lMZTJaVVFtSUw0TzUwOUp1anJzRTAyY1BHcWxHQ3pCUy9rOXVMa0FhdApRYU5CbWhXb2JFQkxJN3hGQmJQZmZ5eU9xUG5HR0pCOWE4MDhSMWpMZHlvWE9CQ0txUUVzM1RpVWtJWXJkZkpKWklRcnlKTmQvbzFrCjNSSmdRS1NSaWpUTExXS0FvVzRDZVFMZit1akM4dHlOUlpkNkFLTDF6eW1FZDgwbEtQaldIL0x4L0piR2Z6L3BJZ0gvUjE2VXZJMXAKYUIwZHBmaHpEZ2VTVStES0RIL2pubE02V1lsUDZlZ1J4RVM0OGFZclI4ZWlxNytUZ1Y4T1RNb2tUZENEZ1I2cDZrOXNBOXVrTmEwbQpkTkxjejIxYmZ3Nlc2WmN1SkNaVVBVbnpheUI0Ti9zR2psb1JlTEVRRGNLZDBid0JGUEFkSVpwK0VzcjlBNXFCVE9zTERnWWxtT25LCmg5SEFoY2h1Q3dOeG5iQ2JzR01CZ0M3RzcwbFlmSVJjQWdnbjExenRKc0xHZkx6elhqUzdKaEhsaWEwRm4xUmJrN1Z1bHFuUXRaREEKMUpmSlZxU3NLbXdocndsUVRxOENZRW0xUUlNSThXY3Z5UzVhaHVMWHpuaG4waC9iK2dEZEJLYVdEeDljM1F2eUNaSmtzclp0RlpvWApBdDUyc0R3OVpkaUhtUVpjQ01MRTRlZlZCWTJiRllLVXNsTTQxWGRIUTltK2RKMUNtVFl4aFpBenFOdndxejROWVVkU0FuOVkycXE1CjZRK01rT2xMc2xhVGNYMjRjaXcyZUZYaGlpdTAwV0NCenNLd2pGY0RvZFVORWZEWmtGRmJ6RzViQTEvcnFnbHFZZ3A3ck15c3RqZGgKcmFPdGpsRVhOVFNvQ25nd05IMEI5YWxpblJBTTVVVmlITldkS0xpZy9uZ0xmeGQzNEhTcTdMMndEV2hyTlJmaWhqWnNhRm1TR0cxdApzV2R3blVETHhGSU9KSndEa0kyMG1WbEEzNzlBMVpKSEJUdE1paFhMZHZXdXNLUjEzc3hRS29EY2I1M1dzTDBBa1Z6WjMrdUFwSTF6CkltNWtmczFJL3ZtNkVLOHBQWVdUSGwrMW1WRHZKL2lLU2VNZG5qY0VhTVNabjdYaVhPUlVGV2Z5UnBtWGs3Y0hHaCs3VHBqZTlZSjgKVGZxbGYvM2xLMldoT09vR01xZUZZeGM1OTlsWGl3Qm01M2krTFN3ZUR4MXozQStsQXZaaTlON2dDQzJFaDZDWitWbldhVGprN1o1RApoVStic1NwdFlsM0xQSzNTTEpWcml4cHBFRUxxb3dDVFhjK082QzVPb0NHWVV6VXdKa242ZHhyTjNGblJxMUJ3cFRndFFYN0JUYjJ0Cmpsdm8wZFNhaVcrMWxhT0ZVMTJ5Y2t2ekdTS213RVpMbEhndlZkVnpyQ09oUHphcXNjWnVtM1Q2OE5yUjZONnJzeDAzanNIN252ZTAKR0lsYWZOc3owMG5sMGNhYThBPT08L3hlbmM6Q2lwaGVyVmFsdWU+PC94ZW5jOkNpcGhlckRhdGE+PC94ZW5jOkVuY3J5cHRlZERhdGE+PHhlbmM6RW5jcnlwdGVkS2V5IElkPSJfMGFkZjVlMzZmODA0MWFmNzBlZjFmNjllMzQ4NGVkYzYiIHhtbG5zOnhlbmM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jIyI+PHhlbmM6RW5jcnlwdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI3JzYS1vYWVwLW1nZjFwIiB4bWxuczp4ZW5jPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGVuYyMiPjxkczpEaWdlc3RNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjc2hhMSIgeG1sbnM6ZHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiLz48L3hlbmM6RW5jcnlwdGlvbk1ldGhvZD48eGVuYzpDaXBoZXJEYXRhIHhtbG5zOnhlbmM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jIyI+PHhlbmM6Q2lwaGVyVmFsdWU+dHJhL2E5SXJNenFndFlXM1pRTTJ0MWQ5MjBRdjZsaXhIWjMyK0daZEZCTy8wcmo0bFdSaEl5WVJuaDN3RTNpWWtFc2s4cXpub2VPSwpqK1o1Rkw5dkFPSjlYWVoyYmVHWS9vOUZrT0N3eDl6K3pvamorK1hWdStod2pqVUw5YkZST1RsZGE1c3dMcmZTMFVBSHkyaHg2REQ3CnZ2SjQxUUVYblZPalRQR01oTGZsVGNURVVYUGtjUDVnMWlsNkZFdCtWY3g3NkVYTkluNm03UHNlUmh6bld5SmJrK0M1amNqRWtkNnoKUFl6NXJhVHRjSXcwa3V3cURTNzU2Ty91Z1NQLzV0eDdxaFA0djlCZ0JyeWIzMTN3ZjRiZXJUTEN1ZWpISjJiMGloZ01Fc0FLZ2xDcAprclErb3BhaHh4cUgzVjZTTzY5cjFpbnVlNk52R1hxT2NtNVMrZz09PC94ZW5jOkNpcGhlclZhbHVlPjwveGVuYzpDaXBoZXJEYXRhPjx4ZW5jOlJlZmVyZW5jZUxpc3Q+PHhlbmM6RGF0YVJlZmVyZW5jZSBVUkk9IiNfMzViMmM5MmNkODQ1MTRiNmVkNmM5Y2JjY2NkZjVmY2QiLz48L3hlbmM6UmVmZXJlbmNlTGlzdD48L3hlbmM6RW5jcnlwdGVkS2V5Pjwvc2FtbDI6RW5jcnlwdGVkQXNzZXJ0aW9uPjwvc2FtbDJwOlJlc3BvbnNlPg==",
>  "requestId": "_d7ccafc6-ee7f-4241-8ec2-6a44326034e7",
>  "levelOfAssurance": "LEVEL_2"
> }
```

</details>


HTTP response codes:

| Code | Description |
| --- | --- |
| 200 | Contains the details of the SAML response, translated into JSON - see 'Handle response scenarios' (ADD LINK) for next steps. |
| 400 | An error due to a problem translating the Response. |
| 422 | An error due to a JSON request in an invalid format (e.g. missing mandatory parameters). |
| 500 | An error due to an internal server error. |

## Definitions

RequestGenerationBody:

| Name | Type | Definition |
| --- | --- | --- |
| levelOfAssurance | string | The minimum level of assurance required by the Relying Party Service. |
| entityId | string | The Entity Id for the service interacting with the Verify Service Provider. This is required if the Verify Service Provider is set up for multi-tenanted use, otherwise it is optional. The value, if provided, must be one of those listed in the configuration for the Verify Service Provider. |

RequestResponseBody:

| Name | Type | Definition |
| --- | --- | --- |
| samlRequest | string | SAML Authn Request as a base64 string. |
| requestId | string | A token that identifies the Authn Request. This is used later to verify that the Authn Request and SAML Response have passed through the same browser. |
| ssoLocation | string | The url for Verify Hub SSO. The entrypoint for SAML authentication flow. |

TranslateSamlResponseBody:

| Name | Type | Definition |
| --- | --- | --- |
| samlResponse | string | A SAML Response as a base64 string. |
| requestId | string | A token that was generated for the original SAML Authn Request. This is used to verify that the Authn Request and SAML Response have passed  through the same browser. |
| levelOfAssurance | string | The minimum level of assurance required by the Relying Party Service. |

TranslatedResponseBody:

| Name | Type | Definition |
| --- | --- | --- |
| scenario | --- | --- |
| pid | string | A unique identifier that can identify a user against an internal record. |
| levelOfAssurance | string | The minimum level of assurance required by the Relying Party Service. |

Level of assurance:

| Name | Definition | Enum |
| --- | --- | --- |
| RequiredLevelOfAssurance | The minimum level of assurance required by the Relying Party Service. | LEVEL_1, LEVEL_2 |
| ReceivedLevelOfAssurance | Level of assurance the user was authenticated with. | LEVEL_1, LEVEL_2 |

Scenario:

| Scenario | Description |
| --- | --- |
| SUCCESS_MATCH | The user was successfully matched by your matching service. Will include `pid` and `levelOfAssurance`. |
| ACCOUNT_CREATION | User was successfully verified, but has not yet been matched. Will include full list of attributes so you can create a new user account. |
| NO_MATCH | User successfully verified, but could not be matched. Used by services that do not want to create new user accounts. |
| CANCELLATION | User opted to cancel verification at some point in their journey. Response will be empty. |
| AUTHENTICATION_FAILED | User could not be identified by identity provider. |
| REQUEST_ERROR | Internal error. |

Attributes:

An optional object containing attributes. If user-account-creation is enabled in the Relying Party  Service, and no match was possible, these attributes are used to create a new account.

| Name | Type | Value | Verified |
| --- | --- | --- | --- |
| firstName | object | string | boolean |
| middleName | object | string | boolean |
| surname | object | string | boolean |
| dateOfBirth | object | string - Format yyyy-MM-dd | boolean |
| address | object | - | boolean |
| addressHistory | array | - | boolean |

Address:

An object describing the address fields of a user

| Name | Description | Type |
| --- | --- | --- |
| postCode | --- | string |
| internationalPostCode | --- | string |
| uprn | --- | string |
| fromDate | Format yyyy-MM-dd | string |
| toDate | Format yyyy-MM-dd | string |

